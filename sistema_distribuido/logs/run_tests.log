[2025-10-04 14:13:04] 🚀 Iniciando suite de pruebas
[2025-10-04 14:13:04] 🔄 Paso 1: Levantar servicios básicos (GC, Actores)
 Container gc  Running
 Container actor_ren  Running
 Container actor_dev  Running
[2025-10-04 14:13:05] ✅ Paso 1 completado: Levantar servicios básicos (GC, Actores)
[2025-10-04 14:13:05] ⏳ Esperando inicialización de servicios...
[2025-10-04 14:13:10] 🔄 Paso 2: Verificar IPs internas (≥2 computadores)
🔍 Obteniendo IPs internas de los contenedores...
🔍 Obteniendo IP para gc...
gc IP: 172.19.0.2
🔍 Obteniendo IP para actor_dev...
actor_dev IP: 172.19.0.4
🔍 Obteniendo IP para actor_ren...
actor_ren IP: 172.19.0.3
🔍 Obteniendo IP para ps...
⚠️  Contenedor ps no está corriendo
🔍 Obteniendo IP para tester...
⚠️  Contenedor tester no está corriendo

📊 Resumen de IPs obtenidas:
================================
🌐 IP única: 172.19.0.2
🌐 IP única: 172.19.0.3
🌐 IP única: 172.19.0.4

📈 Total de IPs únicas:        3
📈 Total de contenedores con IP: 3
✅ Criterio cumplido: ≥2 computadores (IPs distintas)

📁 IPs guardadas en: ./logs/ips.txt
✅ Verificación de IPs completada
[2025-10-04 14:13:10] ✅ Paso 2 completado: Verificar IPs internas (≥2 computadores)
[2025-10-04 14:13:10] 🔄 Paso 3: Verificar que GC esté listo
🔄 Esperando que el Gestor de Carga esté listo...
📍 Endpoint: tcp://gc:5001
⏱️  Máximo 30 intentos con intervalo de 1s
🔍 Intento 1/30: Probando conexión al GC...
✅ GC responde: {'status': 'ERROR', 'message': 'Operación inválida: TEST_CONNECTION. Solo se permiten RENOVACION y DEVOLUCION'}
✅ GC está listo y respondiendo
🎉 Gestor de Carga está listo después de 1 intentos
[2025-10-04 14:13:11] ✅ Paso 3 completado: Verificar que GC esté listo
[2025-10-04 14:13:11] 🧪 Ejecutando Test 1: End-to-end básico
[2025-10-04 14:13:11] 🔄 Paso 4: Test end-to-end (sin PS)
 Container gc  Running
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
collecting ... collected 3 items

tests/test_end_to_end.py::TestEndToEnd::test_devolucion_end_to_end PASSED [ 33%]
tests/test_end_to_end.py::TestEndToEnd::test_renovacion_end_to_end PASSED [ 66%]
tests/test_end_to_end.py::TestEndToEnd::test_operacion_invalida PASSED   [100%]

============================== 3 passed in 14.27s ==============================
[2025-10-04 14:13:26] ✅ Paso 4 completado: Test end-to-end (sin PS)
[2025-10-04 14:13:26] ✅ Test 1 PASSED: End-to-end básico
[2025-10-04 14:13:26] 🧪 Ejecutando Test 2: Pub/Sub visibilidad
[2025-10-04 14:13:26] 🔄 Paso 5: Test pub/sub visibilidad
 Container gc  Running
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
collecting ... collected 3 items

tests/test_pubsub_visibility.py::TestPubSubVisibility::test_pubsub_devolucion_visibility PASSED [ 33%]
tests/test_pubsub_visibility.py::TestPubSubVisibility::test_pubsub_renovacion_visibility PASSED [ 66%]
tests/test_pubsub_visibility.py::TestPubSubVisibility::test_pubsub_multiple_topics PASSED [100%]

============================== 3 passed in 15.31s ==============================
[2025-10-04 14:13:42] ✅ Paso 5 completado: Test pub/sub visibilidad
[2025-10-04 14:13:42] ✅ Test 2 PASSED: Pub/Sub visibilidad
[2025-10-04 14:13:42] 🧪 Ejecutando Test 3: Workload con archivo
[2025-10-04 14:13:42] 🔄 Levantando PS en perfil demo...
[2025-10-04 14:13:42] 🔄 Paso 6a: Levantar PS en perfil demo
 Container gc  Running
 Container actor_ren  Running
 Container actor_dev  Running
 Container ps  Creating
 Container ps  Created
 Container ps  Starting
 Container ps  Started
[2025-10-04 14:13:42] ✅ Paso 6a completado: Levantar PS en perfil demo
[2025-10-04 14:13:45] 🔄 Paso 6b: Test workload con archivo
 Container gc  Running
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
collecting ... collected 1 item

tests/test_file_workload.py::TestFileWorkload::test_file_workload_processing SKIPPED [100%]

============================== 1 skipped in 0.03s ==============================
[2025-10-04 14:13:46] ✅ Paso 6b completado: Test workload con archivo
[2025-10-04 14:13:46] ✅ Test 3 PASSED: Workload con archivo
[2025-10-04 14:13:46] 🔄 Paso 7: Verificar estado final de contenedores
[2025-10-04 14:13:46] ✅ Paso 7 completado: Verificar estado final de contenedores
[2025-10-04 14:13:46] 🔄 Paso 8: Recolectar evidencias del sistema
📊 Recolectando evidencias del sistema...
⏰ Timestamp: Sat Oct  4 14:13:46 -05 2025
[2025-10-04 14:13:46] 🔍 Iniciando recolección de evidencias...
[2025-10-04 14:13:46] 📋 Recolectando estado de contenedores...
[2025-10-04 14:13:47] 🌐 Recolectando IPs internas...
[2025-10-04 14:13:47] 📝 Recolectando logs de servicios...
[2025-10-04 14:13:47] ✅ Logs del GC recolectados
[2025-10-04 14:13:47] ✅ Logs del Actor de Devolución recolectados
[2025-10-04 14:13:47] ✅ Logs del Actor de Renovación recolectados
[2025-10-04 14:13:47] ✅ Logs del PS recolectados
[2025-10-04 14:13:47] 📚 Recolectando estado de la base de datos...
[2025-10-04 14:13:47] 📸 Snapshot 'antes' creado
[2025-10-04 14:13:47] 📸 Estado actual de libros.json recolectado
[2025-10-04 14:13:47] 🔍 Generando diferencias de libros.json...
[2025-10-04 14:13:47] ✅ Diferencias generadas
[2025-10-04 14:13:47] 📄 Recolectando archivo de solicitudes...
[2025-10-04 14:13:47] ✅ Archivo de solicitudes recolectado
[2025-10-04 14:13:47] 📊 Analizando métricas...
[2025-10-04 14:13:47] ✅ Métricas analizadas: OK=21, ERROR=11
[2025-10-04 14:13:47] 📋 Generando resumen...
[2025-10-04 14:13:47] ✅ Resumen generado: ./logs/evidence/resumen.txt

📊 ===== RESUMEN DE EVIDENCIAS =====
📁 Directorio: ./logs/evidence
📋 Archivos recolectados:       13
💾 Tamaño:  80K

📈 Métricas principales:
   operaciones_ok: 21
   operaciones_error: 11
   publicaciones_devolucion: 10
   publicaciones_renovacion: 11

✅ Recolección de evidencias completada
📁 Evidencias disponibles en: ./logs/evidence
[2025-10-04 14:13:47] ✅ Paso 8 completado: Recolectar evidencias del sistema
[2025-10-04 14:13:47] 📊 Generando resumen final de pruebas...
[2025-10-04 14:13:47] 🎉 TODOS LOS TESTS PASARON (3/3)
[2025-10-04 14:13:47] ✅ Requisitos Entrega #1 verificados
